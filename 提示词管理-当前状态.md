# 提示词统一管理 - 当前状态说明

## 📋 当前情况

### 已完成的工作
1. ✅ 创建了 `promptConfig.ts` 提示词配置管理系统
2. ✅ 创建了 `PromptManager.tsx` 管理界面
3. ✅ 集成到Admin页面的"提示词管理"标签页
4. ✅ 实现了导入/导出/重置功能

### 当前配置状态
`promptConfig.ts` 中目前只包含3个配置项:
- `mindmap_structure_base` - 思维导图基础结构
- `mindmap_system` - 力量体系导图
- `mindmap_world` - 世界观导图

### 缺失的配置项
`geminiService.ts` 中还硬编码了以下导图类型的提示词:
- `chapters` - 章节细纲
- `character` - 角色档案
- `events` - 事件时间轴
- `mission` - 任务状态
- `anchor` - 伏笔锚点
- `structure` - 宏观结构

## 🔧 解决方案

### 方案1: 完整迁移(推荐)
将所有硬编码的提示词都迁移到 `promptConfig.ts`:

**优点**:
- 所有提示词统一管理
- 管理员可以编辑所有类型
- 系统更加灵活

**缺点**:
- 配置文件较大
- 需要修改 `geminiService.ts`

### 方案2: 混合模式(当前状态)
只将常用的提示词放在 `promptConfig.ts`,其他保持硬编码:

**优点**:
- 配置文件简洁
- 核心提示词可编辑

**缺点**:
- 部分提示词无法通过界面编辑
- 管理分散

## 📝 下一步操作建议

### 如果选择方案1(完整迁移):

1. **恢复promptConfig.ts中的所有配置**
   - 添加 chapters, character, events, mission, anchor, structure 配置

2. **修改geminiService.ts**
   - 在 `regenerateSingleMap` 函数中使用 `getPromptById()` 获取提示词
   - 删除所有硬编码的 `specificInstruction`

3. **测试验证**
   - 测试每种导图类型的生成
   - 确保提示词正确应用

### 如果选择方案2(保持当前):

1. **在PromptManager中添加说明**
   - 标注哪些提示词可编辑
   - 说明其他提示词在代码中硬编码

2. **文档化**
   - 记录哪些提示词在哪里
   - 提供修改指南

## 🎯 我的建议

我建议选择**方案1(完整迁移)**,原因:

1. **一致性**: 所有提示词统一管理,避免混乱
2. **灵活性**: 管理员可以根据需要调整任何提示词
3. **可维护性**: 代码更清晰,提示词和业务逻辑分离
4. **可扩展性**: 未来添加新的导图类型更容易

## 💡 实施步骤

如果您同意方案1,我可以帮您:

1. 恢复 `promptConfig.ts` 中的所有配置项
2. 修改 `geminiService.ts` 使用配置而非硬编码
3. 测试所有导图类型的生成功能
4. 更新README文档

请告诉我您希望采用哪个方案,我会立即开始实施!
